<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="bootstrap.css">

    <!-- <style>
        .btn{
            background-color: blue;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 15px;
        }

        .btn:hover{
            background-color: rgb(40, 40, 143);
        }
        .btn:active{
            background-color: rgb(143, 40, 40);
        }
    </style> -->

</head>

<body>
    <!-- Background video (uses poster/fallback image when video can't autoplay) -->
    <video class="bg-video" autoplay muted loop playsinline poster="assets/bc.png">
        <source src="assets/bc-v.mp4" type="video/mp4">
        <!-- fallback message -->
        Your browser does not support the video tag.
    </video>


    <!-- <input type="button" class="btn btn-outline-success" value="Submit"> -->


    <!-- <div class="container text-center">
        <div class="row">
            <div class="col bg-danger">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque doloribus sit ipsa, tempore
                    reiciendis exercitationem voluptate dolorem quas ipsam consectetur? Nostrum, numquam illum. Cumque
                    quibusdam ut placeat consequatur veritatis quam.</p>
            </div>
            <div class="col bg-primary">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque doloribus sit ipsa, tempore
                    reiciendis exercitationem
                    voluptate dolorem quas ipsam consectetur? Nostrum, numquam illum. Cumque quibusdam ut placeat
                    consequatur veritatis
                    quam.</p>
            </div>
            <div class="col bg-secondary">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque doloribus sit ipsa, tempore
                    reiciendis exercitationem
                    voluptate dolorem quas ipsam consectetur? Nostrum, numquam illum. Cumque quibusdam ut placeat
                    consequatur veritatis
                    quam.</p>
            </div>
        </div>
        <div class="row">
            <div class="col bg-success">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque doloribus sit ipsa, tempore
                    reiciendis exercitationem voluptate dolorem quas ipsam consectetur? Nostrum, numquam illum. Cumque
                    quibusdam ut placeat consequatur veritatis quam.</p>
            </div>
            <div class="col bg-warning text-white fw-bold m-4 p-4">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque doloribus sit ipsa, tempore
                    reiciendis exercitationem
                    voluptate dolorem quas ipsam consectetur? Nostrum, numquam illum. Cumque quibusdam ut placeat
                    consequatur veritatis
                    quam.</p>
            </div>
            <div class="col bg-danger-subtle">
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cumque doloribus sit ipsa, tempore
                    reiciendis exercitationem
                    voluptate dolorem quas ipsam consectetur? Nostrum, numquam illum. Cumque quibusdam ut placeat
                    consequatur veritatis
                    quam.</p>
            </div>
        </div>
    </div> -->


    <style>
        /* Body fallback background image (used when video is not available) */
        body {
            background-image: url('assets/bc.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            margin: 0;
            font-family: sans-serif;
        }

        /* Fullscreen background video positioned behind page content */
        .bg-video {
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            z-index: 0;
            object-fit: cover;
            filter: brightness(0.55) saturate(0.9);
            pointer-events: none; /* allow clicks through the video */
        }

        /* Hide video on small screens to save bandwidth and avoid autoplay issues */
        @media (max-width: 767px) {
            .bg-video { display: none; }
        }

        /* Ensure gallery sits above the video */
        .gallery { margin-top: 1.5rem; position: relative; z-index: 2; }

        /* Container overlay to improve readability on top of background/video */
        .gallery-wrapper {
            background: rgba(0,0,0,0.45); /* semi-transparent dark overlay */
            padding: 1rem;
            border-radius: 8px;
            color: #fff;
        }

        /* Gallery styles: force same visible resolution using fixed height and object-fit */
        .gallery-item { padding: 0.25rem; }
        .gallery-item .thumb {
            width: 100%;
            height: 180px; /* visible height for all images */
            display: block;
            object-fit: cover; /* preserve aspect ratio, crop if needed */
            border-radius: 6px;
        }

        @media (min-width: 992px) {
            .gallery-item .thumb { height: 220px; }
        }
        @media (min-width: 1200px) {
            .gallery-item .thumb { height: 260px; }
        }
    </style>

    <div class="container gallery">
        <div class="gallery-wrapper">
            <h2 class="mb-3 text-center">Minecraft</h2>
            <div class="row " >
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/1.png" alt="Photo 1" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/1.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/1.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/1.png" data-filename="1.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/2.png" alt="Photo 2" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/2.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/2.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/2.png" data-filename="2.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/3.png" alt="Photo 3" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/3.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/3.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/3.png" data-filename="3.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/4.png" alt="Photo 4" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/4.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/4.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/4.png" data-filename="4.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/5.png" alt="Photo 5" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/5.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/5.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/5.png" data-filename="5.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/6.png" alt="Photo 6" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/6.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/6.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/6.png" data-filename="6.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/7.jpg" alt="Photo 7" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/7.jpg">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/7.jpg">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/7.jpg" data-filename="7.jpg">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/8.png" alt="Photo 8" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/8.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/8.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/8.png" data-filename="8.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/9.png" alt="Photo 9" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/9.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/9.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/9.png" data-filename="9.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/10.png" alt="Photo 10" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/10.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/10.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/10.png" data-filename="10.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/11.png" alt="Photo 11" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/11.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/11.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/11.png" data-filename="11.png">Download</button>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 gallery-item">
                <img src="assets/12.png" alt="Photo 12" class="thumb">
                <div class="actions">
                    <button type="button" class="btn btn-sm btn-outline-success like-btn" data-src="assets/12.png">üëç <span class="vote-count">0</span></button>
                    <button type="button" class="btn btn-sm btn-outline-danger dislike-btn" data-src="assets/12.png">üëé <span class="vote-count">0</span></button>
                </div>
                <button type="button" class="btn btn-dark download-btn" data-src="assets/12.png" data-filename="12.png">Download</button>
            </div>
            </div>
        </div>
    </div>



    <style>
        /* Download button styling and positioning */
        .gallery-item { position: relative; }
        .gallery-item .download-btn {
            position: absolute;
            right: 8px;
            bottom: 8px;
            background: rgba(0,0,0,0.7);
            color: #fff;
            border: none;
            padding: 6px 8px;
            font-size: 0.85rem;
            border-radius: 4px;
            text-decoration: none;
            cursor: pointer;
        }
        .gallery-item .download-btn:hover { background: rgba(0,0,0,0.85); }
        /* Like/Dislike actions (bottom-left) */
        .gallery-item .actions {
            position: absolute;
            left: 8px;
            bottom: 8px;
            display: flex;
            gap: 6px;
            align-items: center;
        }
        .gallery-item .actions .btn {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 8px;
            font-size: 0.85rem;
        }
        .vote-count { font-weight: 600; }
        .active-vote { box-shadow: 0 0 0 2px rgba(255,255,255,0.12) inset; }
        .like-btn.active-vote { background-color: rgba(40,167,69,0.12); }
        .dislike-btn.active-vote { background-color: rgba(220,53,69,0.12); }
    </style>

    <script>
        // Download handler: fetches the image and triggers a download via blob to ensure filename
        async function downloadImage(url, filename) {
            try {
                const res = await fetch(url);
                if (!res.ok) throw new Error('Network response was not ok');
                const blob = await res.blob();
                const blobUrl = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = blobUrl;
                a.download = filename || url.split('/').pop();
                document.body.appendChild(a);
                a.click();
                a.remove();
                URL.revokeObjectURL(blobUrl);
            } catch (err) {
                // Fallback: open image in new tab
                console.error('Download failed, opening image in new tab', err);
                window.open(url, '_blank');
            }
        }

        document.addEventListener('click', (e) => {
            const btn = e.target.closest('.download-btn');
            if (!btn) return;
            const src = btn.getAttribute('data-src');
            const filename = btn.getAttribute('data-filename');
            if (src) {
                downloadImage(src, filename);
            }
        });
    </script>

    <script>
        // Like/Dislike with toggle behavior and persistence in localStorage
        const VOTES_PREFIX = 'votes:'; // stores {like,dislike}
        const USER_VOTES_KEY = 'userVotes'; // stores map src -> 'like'|'dislike'

        function loadVotes(src) {
            try {
                const raw = localStorage.getItem(VOTES_PREFIX + src);
                return raw ? JSON.parse(raw) : { like: 0, dislike: 0 };
            } catch (e) { return { like: 0, dislike: 0 }; }
        }
        function saveVotes(src, votes) {
            localStorage.setItem(VOTES_PREFIX + src, JSON.stringify(votes));
        }
        function loadUserVotes() {
            try { return JSON.parse(localStorage.getItem(USER_VOTES_KEY) || '{}'); }
            catch(e){ return {}; }
        }
        function saveUserVotes(map) { localStorage.setItem(USER_VOTES_KEY, JSON.stringify(map)); }

        function updateCountsInDOM(src, votes) {
            const likeBtn = document.querySelector(`.like-btn[data-src="${src}"]`);
            const dislikeBtn = document.querySelector(`.dislike-btn[data-src="${src}"]`);
            if (likeBtn) {
                const span = likeBtn.querySelector('.vote-count');
                if (span) span.textContent = votes.like;
            }
            if (dislikeBtn) {
                const span = dislikeBtn.querySelector('.vote-count');
                if (span) span.textContent = votes.dislike;
            }
        }

        // Initialize counts from storage
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.like-btn, .dislike-btn').forEach(btn => {
                const src = btn.getAttribute('data-src');
                if (!src) return;
                const votes = loadVotes(src);
                updateCountsInDOM(src, votes);
            });
            // also visually mark user's previous vote
            const userVotes = loadUserVotes();
            Object.keys(userVotes).forEach(src => {
                const type = userVotes[src];
                if (!type) return;
                const btn = document.querySelector(`.${type}-btn[data-src="${src}"]`);
                if (btn) btn.classList.add('active-vote');
            });
        });

        // Toggle voting behavior
        document.addEventListener('click', (e) => {
            const like = e.target.closest('.like-btn');
            const dislike = e.target.closest('.dislike-btn');
            if (!like && !dislike) return;
            const isLike = !!like;
            const btn = like || dislike;
            const src = btn.getAttribute('data-src');
            if (!src) return;

            const votes = loadVotes(src);
            const userVotes = loadUserVotes();
            const prev = userVotes[src] || null;
            const clickedType = isLike ? 'like' : 'dislike';
            const otherType = isLike ? 'dislike' : 'like';

            if (prev === clickedType) {
                // undo
                votes[clickedType] = Math.max(0, votes[clickedType] - 1);
                userVotes[src] = null;
                btn.classList.remove('active-vote');
            } else {
                // add this vote
                votes[clickedType] = (votes[clickedType] || 0) + 1;
                // remove other if previously voted
                if (prev === otherType) {
                    votes[otherType] = Math.max(0, votes[otherType] - 1);
                    const otherBtn = document.querySelector(`.${otherType}-btn[data-src="${src}"]`);
                    if (otherBtn) otherBtn.classList.remove('active-vote');
                }
                userVotes[src] = clickedType;
                btn.classList.add('active-vote');
            }

            saveVotes(src, votes);
            saveUserVotes(userVotes);
            updateCountsInDOM(src, votes);
        });
    </script>

    <script src="app.js"></script>
</body>

</html>